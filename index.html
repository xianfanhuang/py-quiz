<!DOCTYPE html> 
<!-- 加载Pyodide --> 
<script src="static/pyodide/pyodide.js"></script> 
<script> 
let pyodide; 

// 初始化Pyodide环境
async function initPyodide() { 
  pyodide = await loadPyodide({ 
    indexURL: "static/pyodide/", 
  }); 
  await pyodide.loadPackage(["matplotlib"]); 
  console.log("Pyodide初始化完成，可执行Python代码"); 
} 

// 加载题库并渲染
async function loadQuiz() { 
  try { 
    const response = await fetch('static/py/questions.json'); 
    if (!response.ok) throw new Error('题库文件加载失败'); 
    const questions = await response.json(); 
    const quizContainer = document.getElementById('quiz'); 
    questions.forEach((question, index) => { 
      const questionElement = document.createElement('div'); 
      questionElement.className = 'question'; 
      questionElement.innerHTML = ` 
        <h3>第 ${index + 1} 题：${question.question}</h3> 
        <div class="options"> 
          ${question.options.map((option, optIndex) => ` 
            <div class="option"> 
              <input type="radio" name="q${index}" value="${optIndex}"> 
              <label>${option}</label> 
            </div> 
          `).join('')} 
        </div> 
      `; 
      quizContainer.appendChild(questionElement); 
    }); 
    console.log('题库加载成功'); 
  } catch (error) { 
    console.error('加载失败：', error); 
    document.getElementById('quiz').innerHTML = '<p>题库加载失败，请稍后重试</p>'; 
  } 
} 

// 合并初始化逻辑（仅保留一处window.onload）
window.onload = function() { 
  initPyodide(); 
  loadQuiz(); 
}; 
</script> 

<html lang="en"> 
<head> 
  <!-- 保持原头部内容不变 -->
</head> 
<body> 
  <!-- 保持原页面结构不变 -->
  <div id="visualization-area" style="display: none;">...</div> 
  <script> 
    // 答题可视化逻辑（保持不变）
    function onAnswerCorrect(question) { ... } 
  </script> 
  <h1>Python Quiz</h1> 
  <div class="quiz-container">...</div> 
</body> 
</html>